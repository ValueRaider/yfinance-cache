<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>yfinance_cache.yfc_dat &mdash; yfc 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=2709fde1"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            yfc
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../yfinance_cache.html">yfinance_cache package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">yfc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">yfinance_cache.yfc_dat</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for yfinance_cache.yfc_dat</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">IntEnum</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">dateutil.relativedelta</span> <span class="kn">import</span> <span class="n">relativedelta</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">yf_price_data_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Open&#39;</span><span class="p">,</span> <span class="s1">&#39;High&#39;</span><span class="p">,</span> <span class="s1">&#39;Low&#39;</span><span class="p">,</span> <span class="s1">&#39;Close&#39;</span><span class="p">,</span> <span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span>
<span class="n">yf_data_cols</span> <span class="o">=</span> <span class="n">yf_price_data_cols</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;Volume&#39;</span><span class="p">,</span> <span class="s1">&#39;Dividends&#39;</span><span class="p">,</span> <span class="s1">&#39;Stock Splits&#39;</span><span class="p">]</span>
<span class="n">yf_min_year</span> <span class="o">=</span> <span class="mi">1950</span>


<div class="viewcode-block" id="Period">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.Period">[docs]</a>
<span class="k">class</span> <span class="nc">Period</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">Days1</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">Days5</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">Months1</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">Months3</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="n">Months6</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">Years1</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">Years2</span> <span class="o">=</span> <span class="mi">21</span>
    <span class="n">Years5</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">Ytd</span> <span class="o">=</span> <span class="mi">24</span>
    <span class="n">Max</span> <span class="o">=</span> <span class="mi">30</span></div>

<span class="n">periodToString</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Days1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1d&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Days5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5d&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Months1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1mo&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Months3</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;3mo&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Months6</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;6mo&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Years1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1y&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Years2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;2y&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Years5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5y&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Ytd</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ytd&quot;</span>
<span class="n">periodToString</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Max</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;max&quot;</span>
<span class="n">periodStrToEnum</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">periodToString</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<span class="n">periodToTimedelta</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">periodToTimedelta</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Days1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">periodToTimedelta</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Days5</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">periodToTimedelta</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Months1</span><span class="p">]</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">periodToTimedelta</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Months3</span><span class="p">]</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">periodToTimedelta</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Months6</span><span class="p">]</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">periodToTimedelta</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Years1</span><span class="p">]</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">years</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">periodToTimedelta</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Years2</span><span class="p">]</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">years</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">periodToTimedelta</span><span class="p">[</span><span class="n">Period</span><span class="o">.</span><span class="n">Years5</span><span class="p">]</span> <span class="o">=</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">years</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>


<span class="c1"># Months3 = 0</span>
<span class="c1"># Months1 = 2</span>
<div class="viewcode-block" id="Interval">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.Interval">[docs]</a>
<span class="k">class</span> <span class="nc">Interval</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">Week</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">Days1</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">Hours1</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">Mins90</span> <span class="o">=</span> <span class="mi">21</span>
    <span class="n">Mins60</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">Mins30</span> <span class="o">=</span> <span class="mi">23</span>
    <span class="n">Mins15</span> <span class="o">=</span> <span class="mi">24</span>
    <span class="n">Mins5</span> <span class="o">=</span> <span class="mi">25</span>
    <span class="n">Mins2</span> <span class="o">=</span> <span class="mi">26</span>
    <span class="n">Mins1</span> <span class="o">=</span> <span class="mi">27</span></div>

<span class="n">intervalToString</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;2m&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;5m&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins15</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;15m&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins30</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;30m&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins60</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;60m&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins90</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;90m&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Hours1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1h&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Days1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1d&quot;</span>
<span class="n">intervalToString</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Week</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1wk&quot;</span>
<span class="c1"># intervalToString[Interval.Months1] = &quot;1mo&quot;</span>
<span class="c1"># intervalToString[Interval.Months3] = &quot;3mo&quot;</span>
<span class="n">intervalStrToEnum</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">intervalToString</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<span class="n">intervalToTimedelta</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins2</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins5</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins15</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins30</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins60</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins90</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Hours1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Days1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">intervalToTimedelta</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Week</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="c1"># intervalToTimedelta[Interval.Months1] = relativedelta(months=1)</span>
<span class="c1"># intervalToTimedelta[Interval.Months3] = relativedelta(months=3)</span>


<span class="n">exchangeToXcalExchange</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># USA:</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XNYS&quot;</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;ASE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;PCX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>  <span class="c1"># NYSE Arca</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;PNK&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>  <span class="c1"># OTC pink</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;OQX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>  <span class="c1"># OTCQX</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;OEM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>  <span class="c1"># OTC EXMKT</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NCM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;NASDAQ&quot;</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NGM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NCM&quot;</span><span class="p">]</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NMS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NCM&quot;</span><span class="p">]</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;BTS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>  <span class="c1"># Cboe BZX formerly known as BATS</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;CXI&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XCBF&quot;</span>  <span class="c1"># CBOE Futures</span>
<span class="c1"># Canada:</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;TOR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XTSE&quot;</span>  <span class="c1"># Toronto</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;VAN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;TOR&quot;</span><span class="p">]</span>  <span class="c1"># TSX Venture</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;CNQ&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;TOR&quot;</span><span class="p">]</span>  <span class="c1"># CSE. TSX competitor, but has same hours</span>
<span class="c1"># Europe:</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;LSE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XLON&quot;</span>  <span class="c1"># London</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;IOB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;LSE&quot;</span><span class="p">]</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;AMS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XAMS&quot;</span>  <span class="c1"># Amsterdam</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;ATH&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ASEX&quot;</span>  <span class="c1"># Athens</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;BRU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XBRU&quot;</span>  <span class="c1"># Brussels</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;BVB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XBSE&quot;</span>  <span class="c1"># Bucharest</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;CPH&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XCSE&quot;</span>  <span class="c1"># Copenhagen</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;EBS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XSWX&quot;</span>  <span class="c1"># Zurich</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;FRA&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XFRA&quot;</span>  <span class="c1"># Frankfurt. Germany also has XETRA but that&#39;s part of Frankfurt exchange</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;GER&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XFRA&quot;</span>  <span class="c1"># Frankfurt</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;DUS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XDUS&quot;</span>  <span class="c1"># Duesseldorf</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;HAM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XHAM&quot;</span>  <span class="c1"># Hamburg</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;HEL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XHEL&quot;</span>  <span class="c1"># Helsinki</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;ISE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XDUB&quot;</span>  <span class="c1"># Ireland</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;MCE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XMAD&quot;</span>  <span class="c1"># Madrid</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;MIL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XMIL&quot;</span>  <span class="c1"># Milan</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;OSL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XOSL&quot;</span>  <span class="c1"># Oslo</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;PAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XPAR&quot;</span>  <span class="c1"># Paris</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;STO&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XSTO&quot;</span>  <span class="c1"># Stockholm</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;VIE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XWBO&quot;</span>  <span class="c1"># Vienna</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;WSE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XWAR&quot;</span>  <span class="c1"># Warsaw</span>
<span class="c1"># Other:</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;TLV&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XTAE&quot;</span>  <span class="c1"># Israel</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;JNB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XJSE&quot;</span>  <span class="c1"># Johannesburg, South Africa</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;SAO&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;BVMF&quot;</span>  <span class="c1"># Sao Paulo, Brazil</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;SGO&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XSGO&quot;</span>  <span class="c1"># Santiago, Chile</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;BVC&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XBOG&quot;</span>  <span class="c1"># Bogota, Colombia</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;MEX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XMEX&quot;</span>  <span class="c1"># Mexico</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;JPX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;JPX&quot;</span>   <span class="c1"># Tokyo</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s1">&#39;SHZ&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;XSHG&#39;</span>  <span class="c1"># Shenzen</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;TAI&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XTAI&quot;</span>  <span class="c1"># Taiwan</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;KSC&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XKRX&quot;</span>  <span class="c1"># Korea</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;SES&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XSES&quot;</span>  <span class="c1"># Singapore</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;HKG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XHKG&quot;</span>  <span class="c1"># Hong Kong</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;ASX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ASX&quot;</span>   <span class="c1"># Australia</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;NZE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XNZE&quot;</span>  <span class="c1"># New Zealand</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;SAU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XSAU&quot;</span>  <span class="c1"># Saudi Arabia</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s1">&#39;BSE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;XBOM&#39;</span>  <span class="c1"># Bombai, India</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s1">&#39;NSI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;XBOM&#39;</span>  <span class="c1"># National Stock Exchange of India. Schedule appears identical to Bombai</span>
<span class="c1"># FX</span>
<span class="n">exchangeToXcalExchange</span><span class="p">[</span><span class="s2">&quot;CCY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;IEPA&quot;</span>  <span class="c1"># ICE Data Services</span>

<span class="n">exchangesWithBreaks</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;HKG&quot;</span><span class="p">}</span>

<span class="c1"># Yahoo specify data delays here:</span>
<span class="c1"># https://help.yahoo.com/kb/SLN2310.html?guccounter=1</span>
<span class="n">exchangeToYfLag</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># USA:</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;ASE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;PCX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;PNK&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;OQX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;OEM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;NCM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;ASE&quot;</span><span class="p">]</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;NGM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;ASE&quot;</span><span class="p">]</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;NMS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;ASE&quot;</span><span class="p">]</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;BTS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;NYQ&quot;</span><span class="p">]</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;CXI&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="c1"># Canada:</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;TOR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;VAN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;TOR&quot;</span><span class="p">]</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;CNQ&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;TOR&quot;</span><span class="p">]</span>
<span class="c1"># Europe:</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;LSE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;IOB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;AMS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;ATH&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;BRU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;BVB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;CPH&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;EBS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;FRA&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;GER&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;DUS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;HAM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;HEL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;ISE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;MCE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;MIL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;OSL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;PAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;STO&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;VIE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;WSE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="c1"># Other:</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;TLV&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;JNB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;SAO&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;SGO&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;BVC&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>  <span class="c1"># Guess because Yahoo don&#39;t specify</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;MEX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;JPX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;SHZ&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;TAI&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;KSC&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;SES&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;HKG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;ASX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;NZE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;SAU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s1">&#39;BSE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s1">&#39;NSI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># FX:</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;CCY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">exchangeToYfLag</span><span class="p">[</span><span class="s2">&quot;CCC&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># After-market auctions:</span>
<span class="n">exchangesWithAuction</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="n">exchangeAuctionDelay</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">exchangeAuctionDuration</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># ASX after-market auction starts 10m after close but no end time given. So allow 1 minute</span>
<span class="n">exchangesWithAuction</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;ASX&quot;</span><span class="p">)</span>
<span class="n">exchangeAuctionDelay</span><span class="p">[</span><span class="s2">&quot;ASX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">exchangeAuctionDuration</span><span class="p">[</span><span class="s2">&quot;ASX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># TLB after-market auction starts 9m after close but no end time given. So allow 1 minute</span>
<span class="n">exchangesWithAuction</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;TLV&quot;</span><span class="p">)</span>
<span class="n">exchangeAuctionDelay</span><span class="p">[</span><span class="s2">&quot;TLV&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
<span class="n">exchangeAuctionDuration</span><span class="p">[</span><span class="s2">&quot;TLV&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># One extra minute because of randomised start time</span>


<span class="n">yfMaxFetchRange</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins2</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins5</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins15</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins30</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins90</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins60</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">730</span><span class="p">)</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Hours1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">730</span><span class="p">)</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Days1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">yfMaxFetchRange</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Week</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># yfMaxFetchRange[Interval.Months1] = None</span>
<span class="c1"># yfMaxFetchRange[Interval.Months3] = None</span>

<span class="n">yfMaxFetchLookback</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins2</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins5</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins15</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins30</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins90</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Mins60</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">730</span><span class="p">)</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Hours1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">730</span><span class="p">)</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Days1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">yfMaxFetchLookback</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Week</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c1"># yfMaxFetchLookback[Interval.Months1] = None</span>
<span class="c1"># yfMaxFetchLookback[Interval.Months3] = None</span>

<span class="n">listing_date_check_tols</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">listing_date_check_tols</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Days1</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">listing_date_check_tols</span><span class="p">[</span><span class="n">Interval</span><span class="o">.</span><span class="n">Week</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="c1"># listing_date_check_tols[Interval.Months1] = timedelta(days=35)</span>
<span class="c1"># listing_date_check_tols[Interval.Months3] = timedelta(days=35*3)</span>


<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Lock</span><span class="p">,</span> <span class="n">Manager</span><span class="p">,</span> <span class="n">current_process</span>
<span class="k">if</span> <span class="n">current_process</span><span class="p">()</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;MainProcess&#39;</span><span class="p">:</span>
    <span class="c1"># Ensure only main (parent) processes creates a manager</span>
    <span class="n">manager</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">()</span>
    <span class="n">exchange_locks</span> <span class="o">=</span> <span class="p">{</span><span class="n">e</span><span class="p">:</span><span class="n">manager</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">exchangeToXcalExchange</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">exchange_locks</span> <span class="o">=</span> <span class="p">{}</span>

    
<div class="viewcode-block" id="Financials">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.Financials">[docs]</a>
<span class="k">class</span> <span class="nc">Financials</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">IncomeStmt</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">BalanceSheet</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">CashFlow</span> <span class="o">=</span> <span class="mi">2</span></div>


<div class="viewcode-block" id="ReportingPeriod">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.ReportingPeriod">[docs]</a>
<span class="k">class</span> <span class="nc">ReportingPeriod</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">Interim</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">Full</span> <span class="o">=</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="Confidence">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.Confidence">[docs]</a>
<span class="k">class</span> <span class="nc">Confidence</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="n">Low</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">Medium</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">High</span> <span class="o">=</span> <span class="mi">2</span></div>


<span class="n">confidence_to_buffer</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">confidence_to_buffer</span><span class="p">[</span><span class="n">Confidence</span><span class="o">.</span><span class="n">High</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">confidence_to_buffer</span><span class="p">[</span><span class="n">Confidence</span><span class="o">.</span><span class="n">Medium</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">confidence_to_buffer</span><span class="p">[</span><span class="n">Confidence</span><span class="o">.</span><span class="n">Low</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>


<div class="viewcode-block" id="NoIntervalsInRangeException">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.NoIntervalsInRangeException">[docs]</a>
<span class="k">class</span> <span class="nc">NoIntervalsInRangeException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">start_dt</span><span class="p">,</span> <span class="n">end_dt</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interval</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_dt</span> <span class="o">=</span> <span class="n">start_dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_dt</span> <span class="o">=</span> <span class="n">end_dt</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;No </span><span class="si">{}</span><span class="s2"> intervals found between </span><span class="si">{}</span><span class="s2">-&gt;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interval</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_dt</span><span class="p">))</span></div>



<div class="viewcode-block" id="NoPriceDataInRangeException">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.NoPriceDataInRangeException">[docs]</a>
<span class="k">class</span> <span class="nc">NoPriceDataInRangeException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tkr</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">start_dt</span><span class="p">,</span> <span class="n">end_dt</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tkr</span> <span class="o">=</span> <span class="n">tkr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interval</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_dt</span> <span class="o">=</span> <span class="n">start_dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_dt</span> <span class="o">=</span> <span class="n">end_dt</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;No </span><span class="si">{}</span><span class="s2">-price data fetched for ticker </span><span class="si">{}</span><span class="s2"> between dates </span><span class="si">{}</span><span class="s2"> -&gt; </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interval</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tkr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_dt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_dt</span><span class="p">))</span></div>



<div class="viewcode-block" id="TimestampOutsideIntervalException">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimestampOutsideIntervalException">[docs]</a>
<span class="k">class</span> <span class="nc">TimestampOutsideIntervalException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exchange</span> <span class="o">=</span> <span class="n">exchange</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interval</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ts</span> <span class="o">=</span> <span class="n">ts</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to map &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ts</span><span class="si">}</span><span class="s2">&#39; to &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">interval</span><span class="si">}</span><span class="s2">&#39; interval on exchange &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">exchange</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmbiguousComparisonException">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.AmbiguousComparisonException">[docs]</a>
<span class="k">class</span> <span class="nc">AmbiguousComparisonException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value1</span><span class="p">,</span> <span class="n">value2</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">true_prob</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;operation must be a string not </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">operation</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">true_prob</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">true_prob</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;true_prob must be numeric not </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">true_prob</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">value1</span> <span class="o">=</span> <span class="n">value1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value2</span> <span class="o">=</span> <span class="n">value2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operation</span> <span class="o">=</span> <span class="n">operation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">true_prob</span> <span class="o">=</span> <span class="n">true_prob</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Ambiguous whether </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value1</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">operation</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value2</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">true_prob</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (true with probability </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">true_prob</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%)&quot;</span>
        <span class="k">return</span> <span class="n">msg</span></div>



<div class="viewcode-block" id="DateInterval">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateInterval">[docs]</a>
<span class="k">class</span> <span class="nc">DateInterval</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;left&#39; must be date object not datetime&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>

        <span class="k">if</span> <span class="n">closed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">closed</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;closed must be left or right&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">=</span> <span class="n">closed</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">right</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">closed</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;[&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;(&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">closed</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;]&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>



<div class="viewcode-block" id="DateIntervalIndex">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateIntervalIndex">[docs]</a>
<span class="k">class</span> <span class="nc">DateIntervalIndex</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intervals</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">intervals</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;intervals&#39; must be iterable not &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">intervals</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">intervals</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">intervals</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">array</span> <span class="o">=</span> <span class="n">intervals</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">left</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">right</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right_inc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="DateIntervalIndex.from_arrays">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateIntervalIndex.from_arrays">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_arrays</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">right</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;left and right must be equal length&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="n">intervals</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateInterval</span><span class="p">(</span><span class="n">left</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">right</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">closed</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">))]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">intervals</span> <span class="o">=</span> <span class="p">[</span><span class="n">DateInterval</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">right</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">closed</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">))]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">intervals</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">shape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="DateIntervalIndex.sort_values">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateIntervalIndex.sort_values">[docs]</a>
    <span class="k">def</span> <span class="nf">sort_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">DateIntervalIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">)])</span></div>


<div class="viewcode-block" id="DateIntervalIndex.get_indexer">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateIntervalIndex.get_indexer">[docs]</a>
    <span class="k">def</span> <span class="nf">get_indexer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">idx_right</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_inc</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

        <span class="n">idx_left</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
        <span class="n">idx_left</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="n">f_match</span> <span class="o">=</span> <span class="n">idx_right</span> <span class="o">==</span> <span class="n">idx_left</span>

        <span class="n">idx</span> <span class="o">=</span> <span class="n">idx_left</span>
        <span class="n">idx</span><span class="p">[</span><span class="o">~</span><span class="n">f_match</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">idx</span></div>


    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">DateIntervalIndex</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;immutable&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateIntervalIndex</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">array</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>

<div class="viewcode-block" id="DateIntervalIndex.equals">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateIntervalIndex.equals">[docs]</a>
    <span class="k">def</span> <span class="nf">equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">e</span></div>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;DateIntervalIndex([ &quot;</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">x</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; , &quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;])&quot;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>



<div class="viewcode-block" id="uniform_prob_lt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.uniform_prob_lt">[docs]</a>
<span class="k">def</span> <span class="nf">uniform_prob_lt</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">is_scalar</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">is_scalar</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="ow">and</span> <span class="n">is_scalar</span><span class="p">(</span><span class="n">Y</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">X</span> <span class="o">&lt;</span> <span class="n">Y</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">is_scalar</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
        <span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span> <span class="o">=</span> <span class="n">Y</span>
        <span class="k">if</span> <span class="n">X</span> <span class="o">&lt;</span> <span class="n">Y_min</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span>
        <span class="k">elif</span> <span class="n">X</span> <span class="o">&gt;=</span> <span class="n">Y_max</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">Y_max</span> <span class="o">-</span> <span class="n">X</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">Y_max</span> <span class="o">-</span> <span class="n">Y_min</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">is_scalar</span><span class="p">(</span><span class="n">Y</span><span class="p">):</span>
        <span class="n">X_min</span><span class="p">,</span> <span class="n">X_max</span> <span class="o">=</span> <span class="n">X</span>
        <span class="k">if</span> <span class="n">Y</span> <span class="o">&lt;=</span> <span class="n">X_min</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">elif</span> <span class="n">Y</span> <span class="o">&gt;</span> <span class="n">X_max</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">Y</span> <span class="o">-</span> <span class="n">X_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">X_max</span> <span class="o">-</span> <span class="n">X_min</span><span class="p">)</span>

    <span class="c1"># To handle ranges, decompose into weighted sum</span>
    <span class="c1"># of simple sub-ranges.</span>

    <span class="n">X_min</span><span class="p">,</span> <span class="n">X_max</span> <span class="o">=</span> <span class="n">X</span>
    <span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span> <span class="o">=</span> <span class="n">Y</span>

    <span class="c1"># Non-Overlapping Ranges</span>
    <span class="k">if</span> <span class="n">X_max</span> <span class="o">&lt;=</span> <span class="n">Y_min</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1.0</span>
    <span class="k">elif</span> <span class="n">Y_max</span> <span class="o">&lt;=</span> <span class="n">X_min</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="c1"># Identical Ranges</span>
    <span class="k">elif</span> <span class="n">X_min</span> <span class="o">==</span> <span class="n">Y_min</span> <span class="ow">and</span> <span class="n">X_max</span> <span class="o">==</span> <span class="n">Y_max</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.5</span>

    <span class="c1"># Ensure X &lt; Y</span>
    <span class="k">elif</span> <span class="n">X_min</span> <span class="o">&gt;</span> <span class="n">Y_min</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">uniform_prob_lt</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">X_min</span> <span class="o">==</span> <span class="n">Y_min</span> <span class="ow">and</span> <span class="n">X_max</span> <span class="o">&gt;</span> <span class="n">Y_max</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">uniform_prob_lt</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">X_min</span> <span class="o">&lt;</span> <span class="n">Y_min</span><span class="p">:</span>
        <span class="c1"># Split on Y_min</span>
        <span class="n">p_x_lt_ymin</span> <span class="o">=</span> <span class="p">(</span><span class="n">Y_min</span><span class="o">-</span><span class="n">X_min</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">X_max</span><span class="o">-</span><span class="n">X_min</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p_x_lt_ymin</span> <span class="o">+</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="n">Y_min</span><span class="p">,</span> <span class="n">X_max</span><span class="p">),</span> <span class="p">(</span><span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span><span class="o">-</span><span class="n">p_x_lt_ymin</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">X_min</span> <span class="o">==</span> <span class="n">Y_min</span> <span class="ow">and</span> <span class="n">X_max</span> <span class="o">&lt;</span> <span class="n">Y_max</span><span class="p">:</span>
        <span class="c1"># Split on X_max</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="p">(</span><span class="n">X_max</span><span class="o">-</span><span class="n">X_min</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">Y_max</span><span class="o">-</span><span class="n">Y_min</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ratio</span><span class="o">*</span><span class="n">uniform_prob_lt</span><span class="p">((</span><span class="n">X_min</span><span class="p">,</span> <span class="n">X_max</span><span class="p">),</span> <span class="p">(</span><span class="n">Y_min</span><span class="p">,</span> <span class="n">X_max</span><span class="p">))</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">ratio</span><span class="p">)</span>

    <span class="c1"># Unexpected scenario</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected scenario: X=</span><span class="si">{</span><span class="n">X</span><span class="si">}</span><span class="s2">, Y=</span><span class="si">{</span><span class="n">Y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="ComparableRelativedelta">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.ComparableRelativedelta">[docs]</a>
<span class="k">class</span> <span class="nc">ComparableRelativedelta</span><span class="p">(</span><span class="n">relativedelta</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_have_same_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;years&#39;</span><span class="p">,</span> <span class="s1">&#39;months&#39;</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">,</span> <span class="s1">&#39;leapdays&#39;</span><span class="p">,</span> <span class="s1">&#39;hours&#39;</span><span class="p">,</span> <span class="s1">&#39;minutes&#39;</span><span class="p">,</span> <span class="s1">&#39;seconds&#39;</span><span class="p">,</span> <span class="s1">&#39;microseconds&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;weekday&#39;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;years&#39;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">y&#39;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;months&#39;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">mo&#39;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;days&#39;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">d&#39;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;hours&#39;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">h&#39;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;minutes&#39;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s1">m&#39;</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">relativedelta</span><span class="p">):</span>
            <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;years&#39;</span><span class="p">,</span> <span class="s1">&#39;months&#39;</span><span class="p">,</span> <span class="s1">&#39;days&#39;</span><span class="p">,</span> <span class="s1">&#39;leapdays&#39;</span><span class="p">,</span> <span class="s1">&#39;hours&#39;</span><span class="p">,</span> <span class="s1">&#39;minutes&#39;</span><span class="p">,</span> <span class="s1">&#39;seconds&#39;</span><span class="p">,</span> <span class="s1">&#39;microseconds&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;weekday&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">)</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented ComparableRelativedelta=</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> == </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">TimedeltaEstimate</span><span class="p">,</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">relativedelta</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">)):</span>
            <span class="n">reference_date</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">result_date_self</span> <span class="o">=</span> <span class="n">reference_date</span> <span class="o">+</span> <span class="bp">self</span>
            <span class="n">result_date_other</span> <span class="o">=</span> <span class="n">reference_date</span> <span class="o">+</span> <span class="n">other</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_have_same_attributes</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">result_date_self</span> <span class="o">-</span> <span class="n">result_date_other</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">result_date_self</span> <span class="o">&lt;</span> <span class="n">result_date_other</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented ComparableRelativedelta=</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> &lt; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">TimedeltaEstimate</span><span class="p">,</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">relativedelta</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">)):</span>
            <span class="n">reference_date</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">result_date_self</span> <span class="o">=</span> <span class="n">reference_date</span> <span class="o">+</span> <span class="bp">self</span>
            <span class="n">result_date_other</span> <span class="o">=</span> <span class="n">reference_date</span> <span class="o">+</span> <span class="n">other</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_have_same_attributes</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">result_date_self</span> <span class="o">-</span> <span class="n">result_date_other</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">result_date_self</span> <span class="o">&gt;</span> <span class="n">result_date_other</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented ComparableRelativedelta=</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> &gt; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span></div>



<div class="viewcode-block" id="TimedeltaEstimate">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaEstimate">[docs]</a>
<span class="k">class</span> <span class="nc">TimedeltaEstimate</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">td</span><span class="p">,</span> <span class="n">confidence</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">confidence</span><span class="p">,</span> <span class="n">Confidence</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;confidence&#39; must be a &#39;Confidence&#39; object, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">confidence</span><span class="p">)))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;td&#39; must be a &#39;timedelta&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">td</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)</span> <span class="ow">and</span> <span class="n">confidence</span> <span class="o">!=</span> <span class="n">Confidence</span><span class="o">.</span><span class="n">High</span><span class="p">:</span>
            <span class="n">td</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">td</span><span class="o">.</span><span class="n">years</span><span class="o">*</span><span class="mi">365</span> <span class="o">+</span><span class="n">td</span><span class="o">.</span><span class="n">months</span><span class="o">*</span><span class="mi">30</span> <span class="o">+</span><span class="n">td</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">=</span> <span class="n">td</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">=</span> <span class="n">confidence</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">confidence_to_buffer</span><span class="p">[</span><span class="n">confidence</span><span class="p">]</span>

<div class="viewcode-block" id="TimedeltaEstimate.copy">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaEstimate.copy">[docs]</a>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tdstr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">.</span><span class="n">days</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">tdstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">.</span><span class="n">days</span><span class="si">}</span><span class="s1">d&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tdstr</span><span class="si">}</span><span class="s2"> (conf=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="si">}</span><span class="s2">/2)&quot;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">td</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> == </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="TimedeltaEstimate.isclose">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaEstimate.isclose">[docs]</a>
    <span class="k">def</span> <span class="nf">isclose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaEstimate</span><span class="p">):</span>
            <span class="c1"># return abs(self.td - other.td) &lt;= max(self.uncertainty, other.uncertainty)</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">td</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span>
        
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> is-close-to </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">relativedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> += </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">relativedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">relativedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="n">other</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> rsub </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> * </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">*=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> *= </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="TimedeltaEstimate.prob_lt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaEstimate.prob_lt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_lt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaRange</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">td1</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">td2</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span>
                                      <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">td1</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">td2</span><span class="p">))</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaEstimate</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">td</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span>
                                      <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">td</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">td</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">))</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">relativedelta</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span>
                                       <span class="n">other</span><span class="p">)</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> &lt; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="TimedeltaEstimate.prob_gt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaEstimate.prob_gt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="TimedeltaEstimate.prob_le">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaEstimate.prob_le">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_le</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span>
<div class="viewcode-block" id="TimedeltaEstimate.prob_ge">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaEstimate.prob_ge">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_ge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__mod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">&lt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Not implemented modulus of negative TimedeltaEstimate&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">td</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">td</span>
                <span class="k">while</span> <span class="n">td</span> <span class="o">&gt;</span> <span class="n">other</span><span class="p">:</span>
                    <span class="n">td</span> <span class="o">-=</span> <span class="n">other</span>
                <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> modulus-of </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">/</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> / </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="TimedeltaRangeEstimate">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRangeEstimate">[docs]</a>
<span class="k">class</span> <span class="nc">TimedeltaRangeEstimate</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">td1</span><span class="p">,</span> <span class="n">td2</span><span class="p">,</span> <span class="n">confidence</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">confidence</span><span class="p">,</span> <span class="n">Confidence</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;confidence&#39; must be a &#39;Confidence&#39; object, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">confidence</span><span class="p">)))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">td1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">td1</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;td1&#39; must be a &#39;timedelta&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">td1</span><span class="p">)))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">td2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">td2</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;td2&#39; must be a &#39;timedelta&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">td2</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">td2</span> <span class="o">&lt;=</span> <span class="n">td1</span><span class="p">:</span>
            <span class="n">swap</span> <span class="o">=</span> <span class="n">td1</span> <span class="p">;</span> <span class="n">td1</span> <span class="o">=</span> <span class="n">td2</span> <span class="p">;</span> <span class="n">td2</span> <span class="o">=</span> <span class="n">swap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">=</span> <span class="n">td1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">=</span> <span class="n">td2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">=</span> <span class="n">confidence</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">confidence_to_buffer</span><span class="p">[</span><span class="n">confidence</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;TimedeltaRangeEstimate </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="si">}</span><span class="s2"> (conf=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="si">}</span><span class="s2">/2)&quot;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>

<div class="viewcode-block" id="TimedeltaRangeEstimate.isclose">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRangeEstimate.isclose">[docs]</a>
    <span class="k">def</span> <span class="nf">isclose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> is-close-to </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> invert&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">td1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">td2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> == </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> * </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="TimedeltaRangeEstimate.prob_lt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRangeEstimate.prob_lt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_lt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span> 
                                      <span class="n">other</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaEstimate</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">td</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">td</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span> 
                                      <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">td</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">td</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">))</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">td1</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">td2</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span> 
                                      <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">td1</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">td2</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">))</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> &lt; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="TimedeltaRangeEstimate.prob_gt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRangeEstimate.prob_gt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="TimedeltaRangeEstimate.prob_le">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRangeEstimate.prob_le">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_le</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span>
<div class="viewcode-block" id="TimedeltaRangeEstimate.prob_ge">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRangeEstimate.prob_ge">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_ge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span></div>

        

<div class="viewcode-block" id="TimedeltaRange">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRange">[docs]</a>
<span class="k">class</span> <span class="nc">TimedeltaRange</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">td1</span><span class="p">,</span> <span class="n">td2</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">td1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">td1</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;td1&#39; must be a &#39;timedelta&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">td1</span><span class="p">)))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">td2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">td2</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;td2&#39; must be a &#39;timedelta&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">td2</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">td2</span> <span class="o">&lt;=</span> <span class="n">td1</span><span class="p">:</span>
            <span class="n">swap</span> <span class="o">=</span> <span class="n">td1</span> <span class="p">;</span> <span class="n">td1</span> <span class="o">=</span> <span class="n">td2</span> <span class="p">;</span> <span class="n">td2</span> <span class="o">=</span> <span class="n">swap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">=</span> <span class="n">td1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">=</span> <span class="n">td2</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;TimedeltaRange </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">&lt;=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">tdr</span> <span class="o">=</span> <span class="n">TimedeltaRange</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tdr</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">&gt;=</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;abs&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateRange</span><span class="p">(</span><span class="n">other</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="p">,</span> <span class="n">other</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateRangeEstimate</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">+</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span> <span class="o">*</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> * </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="TimedeltaRange.prob_lt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRange.prob_lt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_lt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaRange</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">td1</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">td2</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">td1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">td2</span><span class="p">),</span> 
                                      <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">td1</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">td2</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> &lt; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="TimedeltaRange.prob_gt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRange.prob_gt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="TimedeltaRange.prob_le">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRange.prob_le">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_le</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span>
<div class="viewcode-block" id="TimedeltaRange.prob_ge">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.TimedeltaRange.prob_ge">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_ge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span></div>



<div class="viewcode-block" id="DateRangeEstimate">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRangeEstimate">[docs]</a>
<span class="k">class</span> <span class="nc">DateRangeEstimate</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">confidence</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;start&#39; must be a &#39;date&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">start</span><span class="p">)))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;end&#39; must be a &#39;date&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">end</span><span class="p">)))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">confidence</span><span class="p">,</span> <span class="n">Confidence</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;confidence&#39; must be a &#39;Confidence&#39; object, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">confidence</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">=</span> <span class="n">confidence</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">confidence_to_buffer</span><span class="p">[</span><span class="n">confidence</span><span class="p">]</span>

<div class="viewcode-block" id="DateRangeEstimate.copy">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRangeEstimate.copy">[docs]</a>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">DateRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;DateRangeEstimate </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2"> (conf=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="si">}</span><span class="s2">/2)&quot;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> abs&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRangeEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> == </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="DateRangeEstimate.isclose">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRangeEstimate.isclose">[docs]</a>
    <span class="k">def</span> <span class="nf">isclose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">other</span> <span class="ow">and</span> <span class="n">other</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">))</span> <span class="ow">or</span>\
               <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)):</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRangeEstimate</span><span class="p">):</span>
            <span class="n">self_start_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span>
            <span class="n">self_end_max</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span>
            <span class="n">other_start_min</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span>
            <span class="n">other_end_max</span>   <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">other_start_min</span> <span class="o">&lt;=</span> <span class="n">self_end_max</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">self_start_min</span> <span class="o">&lt;=</span> <span class="n">other_end_max</span><span class="p">)</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> is-close-to </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> negate&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> invert&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> += </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> radd </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> -= </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="n">conf</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">conf</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRangeEstimate</span><span class="p">):</span>
            <span class="n">conf</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">conf</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="fm">__sub__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

<div class="viewcode-block" id="DateRangeEstimate.prob_lt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRangeEstimate.prob_lt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_lt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span>
                                      <span class="n">other</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span>
                                      <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">))</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRangeEstimate</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span>
                                      <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">))</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> &lt; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="DateRangeEstimate.prob_gt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRangeEstimate.prob_gt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="DateRangeEstimate.prob_le">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRangeEstimate.prob_le">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_le</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span>
<div class="viewcode-block" id="DateRangeEstimate.prob_ge">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRangeEstimate.prob_ge">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_ge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span></div>



<div class="viewcode-block" id="DateRange">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRange">[docs]</a>
<span class="k">class</span> <span class="nc">DateRange</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;start&#39; must be a &#39;date&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">start</span><span class="p">)))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;end&#39; must be a &#39;date&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">end</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>

<div class="viewcode-block" id="DateRange.copy">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRange.copy">[docs]</a>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">DateRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;DateRange </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> abs&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> == </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="DateRange.isclose">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRange.isclose">[docs]</a>
    <span class="k">def</span> <span class="nf">isclose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">other</span> <span class="ow">and</span> <span class="n">other</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRangeEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> is-close-to </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="DateRange.prob_lt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRange.prob_lt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_lt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">),</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">),</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> &lt; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="DateRange.prob_gt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRange.prob_gt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="DateRange.prob_le">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRange.prob_le">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_le</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span>
<div class="viewcode-block" id="DateRange.prob_ge">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateRange.prob_ge">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_ge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> += </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">+</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> radd </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> -= </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRange</span><span class="p">(</span><span class="n">other</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">other</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> rsub </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> negate&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> invert&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="DateEstimate">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateEstimate">[docs]</a>
<span class="k">class</span> <span class="nc">DateEstimate</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">confidence</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">confidence</span><span class="p">,</span> <span class="n">Confidence</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;confidence&#39; must be a &#39;Confidence&#39; object, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">confidence</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="p">(</span><span class="n">datetime</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">))</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;&#39;dt&#39; must be a &#39;date&#39; object or None, not </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">dt</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">confidence</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">=</span> <span class="n">confidence</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="n">confidence_to_buffer</span><span class="p">[</span><span class="n">confidence</span><span class="p">]</span>

<div class="viewcode-block" id="DateEstimate.copy">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateEstimate.copy">[docs]</a>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;DateEstimate </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="si">}</span><span class="s2"> (conf=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="si">}</span><span class="s2">/2)&quot;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

<div class="viewcode-block" id="DateEstimate.prob_lt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateEstimate.prob_lt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_lt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">1.0</span>
            <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
            <span class="k">return</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span> 
                                  <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">uniform_prob_lt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">),</span> 
                               <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">p</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRangeEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> &lt; </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="DateEstimate.prob_gt">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateEstimate.prob_gt">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_gt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<div class="viewcode-block" id="DateEstimate.prob_le">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateEstimate.prob_le">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_le</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_lt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&lt;</span> <span class="n">other</span>
<div class="viewcode-block" id="DateEstimate.prob_ge">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateEstimate.prob_ge">[docs]</a>
    <span class="k">def</span> <span class="nf">prob_ge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prob_gt</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="o">&gt;</span> <span class="n">other</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> abs&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">AmbiguousComparisonException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="s1">&#39;==&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> == </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="DateEstimate.isclose">
<a class="viewcode-back" href="../../yfinance_cache.html#yfinance_cache.yfc_dat.DateEstimate.isclose">[docs]</a>
    <span class="k">def</span> <span class="nf">isclose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">uncertainty</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uncertainty</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> is-close-to </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">relativedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">+=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> += </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">td</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">relativedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">+</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaRange</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">td1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">td2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">relativedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-=</span> <span class="n">other</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> -= </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">timedelta</span><span class="p">,</span> <span class="n">relativedelta</span><span class="p">,</span> <span class="n">ComparableRelativedelta</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimedeltaEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">DateEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">td</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="n">td</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">date</span>
            <span class="n">c0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span>
            <span class="n">c1</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span>
            <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">c0</span><span class="p">,</span> <span class="n">c1</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">-</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRange</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateRangeEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaRangeEstimate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DateEstimate</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span> <span class="o">-</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TimedeltaEstimate</span><span class="p">(</span><span class="n">other</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> rsub </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">other</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> negate&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not implemented </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> invert&#39;</span><span class="p">)</span></div>


</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, cs.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>